---
layout: post
title: "linux常用命令总结"
subtitle: "一些常用的小命令"
author: "guanlili"
header-img-credit: "@WebdesignerDepot"
header-img-credit-href: "medium.com/@WebdesignerDepot/poll-should-css-become-more-like-a-programming-language-c74eb26a4270"
header-mask: 0.4
tags:
  - linux
  - dp实习
  - 数据库
---

## 前言

在dp实习测试工程师和在花小猪实习测试开发期间，由于所有服务器都是在linux平台管理，故接触linux比较多。在此对工作中常用到的linu命令进行总结，以便自己复习，对抗遗忘。

> 持续更新，在工作中学习。

## 常用基本命令

pwd 查看当前目录路径

sudo -i 进入root用户

ssh dp@

##### cd(Change Directory)命令

cd..返回上一级

##### ls(list)命令

ls查看当前目录

ls-l输出详细信息（权限文件名等）

ls-lh输出方便人看的详细信息（GB MB）

ls-a显示所有文件（包括隐藏文件）

ls-l查看文件的权限

##### chmod 修改权限命令

chmod +x test.sh 给脚本赋予可执行的权限

##### touch命令

touch file1 file2 file3 建立多个文件

##### mkdir(make directory)新建文件夹

mkdir folder2新建文件夹

mkdir folder2/f2在folder2里再建个f2

##### rm 移除文件

rm file1移除单个文件

rm -i有提示的删除（避免误删）

rm -r 2.6.0 删除2.6.0文件夹（整个文件夹）

##### mv 移动命令

例：mv /home/1.txt /opt/”，这个命令是将/home目录下的1.txt移动到 /opt目录下，命令执行后home目录下的1.txt将会被删除。

##### cp (copy) 复制命令

cp file1 file1copy 把1复制出copy

cp -i老文件 新文件（检查覆盖）

cp file1 folder1/复制文件到文件夹

cp -R folder1/ folder2/ 复制文件夹，-R

##### mv剪切命令

mv file1 folder1/ 移动去另一个文件夹

$ mv  file1 file1rename

##### tar解压缩

$ tar zxvf 文件 f后面一定跟着压缩文件的名称，

##### nano（文字编辑or写代码）

nano t.py新建python脚本 ctrl+X保存退出

python t.py执行

##### cat(catenate)命令

查看日志

cd /data/datapipeline/log/sinkdp/ 先进入到日志的目录

cat 423ef181118c.log | grep Insert 查看423ef181118c日志，查找Insert字符串

cat 423ef181118c* | grep Insert 查所有的日志 从中查找Insert字符串

创建目的地/任务失败：   dp-thrall-webservice

tailf  /data/datapipeline/log/dpthrall/thrall.log

源端报错：sourcedp

ls -lrht /data/datapipeline/log/sourcedp

（注：上述命令结果最后面的即是最新日志）

目的端报错：sinkdp

写入目的地失败ls -lrht /data/datapipeline/log/sinkdp

（注：上述命令结果最后面的即是最新日志）

容器日志查看方式（以zookeeper为例）：

docker logs -f `docker ps -a | grep zookeeper| awk '{print $1}'`

##### wget 下载链接

##### 查看端口

```
netstat -tunlp | grep 6379
```
netstat -a

##### telnet命令

ping 10.163.243.210

telnet 10.163.243.210 8098

##### 软连接ln

建立一个软连接

ln -s file1  file1soft

删除软连接

rm -fr xxxx/ 加了个/ 这个是删除文件夹

rm -fr xxxx 没有/ 这个是删除软链接



##### Linux 用户切换、修改用户名、修改密码

###### 用户切换

 "$"：普通用户提示符

"#"：root用户提示符

普通用户到root:

方式一：命令：su然后输入root密码 此种方式只是切换了root身份，但Shell环境仍是普通用户的Shell，pwd命令一下，目录仍然是普通用户的工作目录。

方式二：命令：su -然后输入root密码 此种方式，是连用户和Shell环境一起切换成root身份。 工作目录变成root的工作目录，pwd命令一下，即可看到。

只有切换用户，才不会出现PATH环境变量错误。

可以用命令 echo $PATH  看一下su、su - 后的环境变量有何不同。

由此类推，从当前用户切换到其它用户也一样，应使用su -命令。

两种方式切换后的pwd和PATH对比：

su  切换后的pwd：[wyc@localhost ~]$su

Password:

[root@localhost wyc]# pwd

/home/wyc

su - 切换后的pwd： [wyc@localhost ~]$ su -

Password:

[root@localhost ~]#pwd

/root

su  切换后的root：  /usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/wyc/bin

su - 切换后的root： /usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin

2.root到普通用户

命令：su 普通用户名     或    exit

###### 修改普通用户用户名

su - 或 su - root（到root用户下。 注意要使用su -，原因见下文）

usermod  -l  新用户名  -d  /home/新用户名  -m  老用户名   （英文L）

注意：网上有些人方法是usermod -l 新用户名 老用户名，

但这种方法只改了表面，你用pwd命令看一下，路径还是之前的用户名。

###### 修改密码

1. 修改普通用户密码

   命令： su - root                 获取root权限

   命令：passwd 用户名   如passwd ghl

2. 修改 root密码

   命令：passwd  超级用户名         修改超级用户的密码，如root的密码

linux 修改localhost主机名不重启生效

[root@localhost ~]# vim /etc/hostname 

[root@localhost ~]# hostname haha

关闭linux终端,重新连接，即可看到用户名变成了自己想要的。

##### 关于corn表达式

corn表达式 0 48 14 ? * 1 意思是每周一的14：48