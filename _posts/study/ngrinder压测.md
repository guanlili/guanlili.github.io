# ngrinder压测

## 目标

掌握常用压测工具ngrinder，熟悉ngrinder脚本开发方式，方法；将压测需要用到的私服包，统一归纳到本地工程lib引用包。

## nGrinder简介

nGrinder是基于Grinder开源项目，由NHN公司的开发团队进行了重新设计和完善。nGrinder是一款非常易用，有简洁友好的用户界面和controller-agent分布式结构的强大的压力测试工具。
 nGrinder测试基于python测试脚本(groovy也可)，用户按照一定规范编写测试脚本，controller会将脚本一集需要的资源分发到agent，用jython执行。并且在执行的过程中收集运行情况、相应时间、测试目标服务器的运行情况等。并且保存这些数据生成测试报告，以供查看。
 这款框架的一大特点就是非常的简单易用，安装也很容易，可以说是开箱即用。

## 为什么是nGrinder

#### **1、主流的性能测试工具 LoadRunner JMeter 与 nGrinder对比**

#### 1.1、Loadrunner

- 基于UI操作，容易上手。早期很流行，功能强大，但是太笨重，安装很麻烦。
- 不开源，扩展性不高，收费贵。往后的方向肯定是客户端工具逐步向平台化发展，所以已经慢慢被替代了。

#### 1.2、JMeter

- 基于UI操作，容易上手，但是编程能力较弱（使用beanshell脚本语言）。
- 其次JMeter基于线程（单进程，多线程，循环N次），单节点模拟数千用户几乎不可能。支持平台化集成，也诞生了一些开源平台，如*MeterSphere*

#### 1.3、nGrinder

- 单节点可支持5000+并发（多进程，多线程）、支持分布式、可监控被测服务器、可录制脚本、开源、平台化
- 易于二次开发
- 参数化功能较弱
- 对测试人员的代码要求较高

| 比较点       | JMeter                                         | Ngrinder                         | LoadRunner                                         |
| ------------ | ---------------------------------------------- | -------------------------------- | -------------------------------------------------- |
| 实现语言     | Java                                           | java/python                      | java/VB/C/.NET                                     |
| 使用方式     | C/S或Command                                   | B/S                              | C/S                                                |
| 支持分布式   | master/slave                                   | controller/agent                 | master/slave                                       |
| 开源方式     | 免费，完全开源                                 | 免费，完全开源                   | 收费                                               |
| 支持协议     | 多种协议                                       | 多种协议                         | 多种协议                                           |
| 资源监控     | monitor/plugin，如果二开，需要查找plugin的源码 | monitor方式                      | 自带资源监控功能                                   |
| 社区活跃度   | 文档完善                                       | 有中文社区                       | 网上资料和相关培训很多，购买正版还可以得到技术支持 |
| 是否需要编码 | 基本不需要                                     | 需要，Jython/Groovy              | 需要                                               |
| 脚本的维护   | 本地                                           | 内置SVN，可以修改成git           | 本地                                               |
| 脚本录制     | 可使用BadBoy进行录制                           | 可通过PTS插件进行录制            | 自带录制功能                                       |
| 可扩展性     | 可增加plugin，输出结果可以再加工，扩展性强     | 可增加plugin，扩展性强           | 通过扩展函数库实现                                 |
| 安装         | 简单，解压即可                                 | 简单，可以下载安装包或绿色包解压 | 安装包比较大，安装繁琐                             |
| 平台化       | 有开源或云端的压测平台                         | 本身具备                         | 无                                                 |

## nGrinder组成 

**Controller**

- 分发调度测试任务
- 协调测试进程
- 整理和显示测试的统计结果
- 用户创建和修改脚本

**Monitor**

- 用于监控被测服务器的系统性能（例如：CPU/MEMORY）
- 必须部署在被测服务器上

**Agent**

- 压测任务的拉取
- 在代理服务器上加载运行测试进程和线程
- 监控施压机器的系统性能（例如：CPU/MEMORY/网卡/磁盘）



# nGrinder慢速安装

为什么是慢速呢？因为通过源码安装可以更好的了解nGrinder怎么工作和为二次开发做准备。

1.下载[二进制tar.gz包](https://github.com/naver/ngrinder/releases )或者直接fork到自己的仓库 clone到本地都行

2.解压缩

tar -zxvf ngrinder-ngrinder-3.5.5-p1-20210531.tar.gz





